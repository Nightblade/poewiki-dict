# yaml-language-server: $schema=https://json.schemastore.org/github-workflow.json
name: 'Build'

permissions: write-all

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    env: 
      CONFIG_URL:  https://raw.githubusercontent.com/Nightblade/pob-dict/main
    steps:

    - name: Checkout code
      uses: actions/checkout@v3

    - name: Fetch files
      run: |
        curl --silent --show-error --parallel --remote-name-all \
          ${{ env.CONFIG_URL }}/poe-dict.txt

    - name: Join Files
      run: |
        cat src/wiki-dict.txt poe-dict.txt > persdict.dat

    - name: do the thing
      uses: actions/upload-artifact@v1.0.0
      with:
          name: persdict.dat
          path: '${{ github.workspace }}/persdict.dat'
